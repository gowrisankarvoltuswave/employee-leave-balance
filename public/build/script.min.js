"use strict";app.controller("loginCtrl",function($scope,$state,loginSvc,socialAuth,googleAuthSvc){$scope.login=function(obj){loginSvc.create(obj,function(response){response.success?(window.sessionStorage.setItem("token",response.token),$state.go("vehicles")):alert("error")})},$scope.socialAuthbtn=function(){socialAuth.fblogin().then(function(response){console.log(response)})},$scope.googleAuthbtn=function(){googleAuthSvc.googleloginmethod().then(function(response){console.log(response)})},$scope.data=[{id:1,name:"John",position:["Jr Asst","Sr Asst","BD","GM"],office:["TCS","Wipro","Infosys","IBM"],salary:65e3},{id:2,name:"David",position:["Jr Asst","Sr Asst","BD","GM"],office:["TCS","Wipro","Infosys","IBM"],salary:5e4},{id:3,name:"Ravi",position:["Sr Developer"],office:["TCS"],salary:35e3},{id:4,name:"Alekya",position:["GM"],office:["IBM"],salary:25e3},{id:5,name:"Saahithi",position:["HR"],office:["Wipro"],salary:35e3},{id:6,name:"Niranjan",position:["BD"],office:["Genpact"],salary:45e3},{id:7,name:"Neeraja",position:["AGM"],office:["Infosys"],salary:95e3}]}),app.controller("propertyCtrl",function($scope,propertiesSvc){propertiesSvc.get(function(response){$scope.data=response.data})}),app.controller("vehicleCtrl",function($scope,vehiclesSvc){vehiclesSvc.get(function(response){$scope.vehicleList=response.data,$scope.message="Test Message"})}),angular.module("authApp").service("googleAuthSvc",function($http,$q,Config){this.googleloginmethod=function(){var dfd=$q.defer();return $http({method:"GET",url:Config.url+"googlepassport",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(response){dfd.resolve(response.data),console.log(response)}).catch(function(response){dfd.reject(response)}),dfd.promise}}),angular.module("authApp").service("APIInterceptor",function($http){this.request=function(){$http.defaults.headers.post["x-access-token"]=window.sessionStorage.getItem("token")}}),angular.module("authApp").factory("loginSvc",["$resource","Config",function($resource,Config){return $resource(Config.url+"users",{username:"@username"},{update:{method:"PUT"},delete:{method:"DELETE"},create:{method:"POST"},get:{method:"GET",isArray:!1,headers:{Authorization:"dfgasdfjhkjhk3452i34hpiuhasd9f435kjkad"}}})}]),angular.module("authApp").factory("propertiesSvc",["$resource",function($resource){return $resource("https://oauth.voltuswave.com/properties",{id:"@id"},{update:{method:"PUT"},delete:{method:"DELETE"},create:{method:"POST"},get:{method:"GET",isArray:!1}})}]),angular.module("authApp").service("socialAuth",function($http,$q,Config){this.fblogin=function(){var dfd=$q.defer();return $http({method:"GET",url:Config.url+"sociallogin",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(response){dfd.resolve(response),console.log(response)}).catch(function(response){dfd.reject(response)}),dfd.promise}}),angular.module("authApp").factory("usersSvc",["$resource","Config",function($resource,Config){return $resource(Config.url+"users/:id",{id:"@id"},{update:{method:"PUT"},delete:{method:"DELETE"},create:{method:"POST"},get:{method:"GET",isArray:!1}})}]),angular.module("authApp").factory("vehiclesSvc",["$resource",function($resource){return $resource("https://oauth.voltuswave.com/vehicles",{id:"@id"},{update:{method:"PUT"},delete:{method:"DELETE"},create:{method:"POST"},get:{method:"GET",isArray:!1}})}]),app.factory("Auth",function($resource,$rootScope,$window,$q,Config){var auth={init:function(){auth.isLoggedIn()&&($rootScope.users=auth.currentUser())},checkPermissionForView:function(view){return!view.requiresAuthentication||userHasPermissionForView(view)}},userHasPermissionForView=function(view){return!!auth.isLoggedIn()&&(!view.permissions||!view.permissions.length||auth.userHasPermission(view.permissions))};return auth.userHasPermission=function(permissions){if(!auth.isLoggedIn())return!1;var found=!1;return angular.forEach(permissions,function(permission,index){angular.fromJson(window.localStorage.getItem("user")).permissions.indexOf(permission)>=0&&(found=!0)}),found},auth.currentUser=function(){return $window.sessionStorage.user},auth.isLoggedIn=function(){return null!=angular.fromJson(window.localStorage.getItem("user"))},auth}),app.factory("authInterceptor",function($rootScope,$q,$window,$injector){return{request:function(config){if(config.headers=config.headers||{},window.sessionStorage.getItem("token")){var token=window.sessionStorage.getItem("token");config.headers["x-access-token"]=token}return config},response:function(response){return response.data.status,response||$q.when(response)}}}),app.config(function($httpProvider){$httpProvider.interceptors.push("authInterceptor")});var app=angular.module("authApp");app.service("Config",function(){this.url="https://oauth.voltuswave.com/"});